from aiogram import types
from aiogram_dialog import DialogManager
from aiogram_dialog import StartMode

from app.bot.dialogs import LanguageDialogSG
from app.bot.middlewares import i18n
from app.database.models import User

_ = i18n.gettext

welcome_text = _("""üëã –í–µ–ª–∫–æ–º!
–£ —Ç–µ–±—è –∫–∞–∫ –∏ —É –º–µ–Ω—è –µ—Å—Ç—å –ø—Ä–æ–±–ª–µ–º–∞ —Å —Ç–µ–º, —á—Ç–æ —Ç—ã –∑–∞–±—ã–≤–∞–µ—à—å –ø—Ä–æ—á–µ—Å—Ç—å —Å–æ—Ö—Ä–∞–Ω—ë–Ω–Ω—ã–µ –≤ –∑–∞–∫–ª–∞–¥–∫–∞—Ö —Å—Ç–∞—Ç—å–∏?
–ë–æ—Ç –ø–æ–º–æ–∂–µ—Ç! (–Ω–∞–¥–µ—é—Å—å, –ø–æ—Ç–æ–º—É —á—Ç–æ –º–Ω–µ –ø–æ–º–æ–≥) 
–û–Ω –±—É–¥–µ—Ç –∫–∞–∂–¥—ã–π –¥–µ–Ω—å –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å —Ç–µ–±–µ –ø–æ —Å—Å—ã–ª–æ—á–∫–µ –Ω–∞ –ø—Ä–æ—á—Ç–µ–Ω–∏–µ.

–ö–∞–∫ —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
* –¢—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ—à—å –±–æ—Ç—É –ª—é–±—É—é —Å—Å—ã–ª–∫—É
* –ñ–¥–µ—à—å –ø–æ–∫–∞ –Ω–∞—Å—Ç—É–ø–∏—Ç –≤—Ä–µ–º—è —Ä–∞—Å—Å—ã–ª–∫–∏
* –ß–∏—Ç–∞–µ—à—å —Å–≤–æ—é —Å—Ç–∞—Ç—å—é –∏ –ø–æ–º–µ—á–∞–µ—à—å –µ–µ –ø—Ä–æ—á–∏—Ç–∞–Ω–Ω–æ–π —É –±–æ—Ç–∞ (–ø–æ–¥ —Å—Å—ã–ª–∫–æ–π –±—É–¥–µ—Ç –∫–Ω–æ–ø–æ—á–∫–∞)
* –†–∞–¥—É–µ—à—å—Å—è —Å–≤–æ–µ–π –ø—Ä–æ–¥—É–∫—Ç–∏–≤–Ω–æ—Å—Ç–∏!

–ü–æ—è–≤–∏–ª–æ—Å—å –∂–µ–ª–∞–Ω–∏–µ –ø—Ä–æ—á–µ—Å—Ç—å —á—Ç–æ-—Ç–æ –∏–∑ –¥–æ–±–∞–≤–ª–µ–Ω–Ω—ã—Ö —Å—Å—ã–ª–æ–∫, –Ω–æ –Ω–µ —Ö–æ—á–µ—à—å –∂–¥–∞—Ç—å –Ω–∞—Å—Ç—É–ø–ª–µ–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏ —Ä–∞—Å—Å—ã–ª–∫–∏?
–ò—Å–ø–æ–ª—å–∑—É–π –∫–æ–º–∞–Ω–¥—É /random :)
""")


async def send_welcome(message: types.Message, dialog_manager: DialogManager):
    await User.get_from_message(message)
    await message.reply(_(welcome_text))
    await dialog_manager.start(LanguageDialogSG.main, data=True, mode=StartMode.RESET_STACK)
